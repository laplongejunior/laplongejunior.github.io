<!DOCTYPE html>
<html lang="fr" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8" />
<!--<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">-->
<title>Liste des absences du Ceria</title>
<link rel="icon" href="http://www.ceria.be/irl/templates/ja_purity/favicon.ico" type="image/x-icon" />
<style type="text/css">
iframe { border:none; }
html, body {
	height:100%;
	width:100%;
	margin:0;
	padding:0;
}
.main {
	display:-ms-grid;
	-ms-grid-columns: 500px 1fr;
	-ms-grid-rows: 500px 1fr;
	display:grid;
	grid-template-columns: 500px 1fr;
	grid-template-rows: 500px 1fr;
	position:absolute;
}

.cell {
	width:100%;
	height:100%;
}
.cell-a {
	-ms-grid-row:1;
	-ms-grid-column:1;
	grid-row:1;
	grid-column:1;
}
.cell-b {
	-ms-grid-row:1;
	-ms-grid-row-span:2;
	-ms-grid-column:2;
	grid-row:1/span 2;
	grid-column:2;
}
.cell-c {
	-ms-grid-row:2;
	-ms-grid-column:1;
	grid-row:2;
	grid-column:1;
}

.local {
}
</style>
<script type="text/javascript">
//<![CDATA[
var m_originalWidth, m_console;
function load(fbId, profsId, consoleId) {
	var doc = window.document;
	var originalStyle = window.getComputedStyle(doc.getElementById(fbId));
	m_originalWidth = parseInt(originalStyle['width']);
	
	m_console = doc.getElementById(consoleId);
	m_console.innerHTML = 'Première ligne de la console';
	
	var profsElement = doc.getElementById(profsId);
	window.setInterval(function(){refresh(profsElement)}, 600000);
	
	var func = function(){redraw(profsElement.parentElement)};
	func.call();	
	window.addEventListener("resize", func);
	
	log('Page ouverte');
}
function redraw(grid) {
	var temp = window.document.body.offsetWidth/2;
	if (temp > m_originalWidth)
		temp = m_originalWidth;	
	grid.style['-ms-grid-columns'] = temp+'px 1fr';
	grid.style['gridTemplateColumns'] = temp+'px 1fr';
}
function refresh(iframe) {
	iframe.contentWindow.location.reload();
	var src = iframe.src;
	iframe.src = 'about:blank';
	iframe.src = src;
	log('Fenêtre Ceria rechargée');
}
function log(line) {
	var text = m_console.innerHTML;
	if (text.length !== 0) text = '<br />' + text;
	var now = new Date();
	line = '['+pad(now.getHours())+':'+pad(now.getMinutes())+':'+pad(now.getSeconds())+'] ' + line;
	m_console.innerHTML = line + text;
}
function pad(str) {
	return ('00' + str).slice(-2);
}

window.addEventListener('load', function(){load('fb','profs','console')}, false);
//]]>
</script>
</head>
<body class="main">
<iframe id="fb" class="cell cell-a" src="https://www.facebook.com/plugins/page.php?href=https://www.facebook.com/456811884398747&amp;tabs=timeline&amp;width=500&amp;small_header=true&amp;adapt_container_width=true&amp;hide_cover=true&amp;show_facepile=false" sandbox="allow-same-origin allow-scripts"></iframe>
<iframe id="profs" class="cell cell-b" src="http://www.ceria.be/irl/index.php?option=com_content&amp;view=article&amp;id=114&amp;Itemid=129" sandbox=""></iframe>
<div class="cell cell-c">
	<span id="console" class="local">
	Javascript est désactivé<br />
	Cette page ne s'auto-rafraîchira pas
	</span>
</div>   
</body>
</html>