<!DOCTYPE html>
<html lang="fr">
<head>
<title>Test</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script>
var loading = new Set();
function _loadedIframe(iframe) {
	_loadedContent(iframe.parentElement);
}
function _loadedContent(content) {
	if (loading.delete(content))
		content.style.visibility='visible';
	else
		loading.add(content);
}

function _onload(contentClass) {
	var arr = window.document.getElementsByClassName(contentClass);
	for (var i=0; i<arr.length; ++i) {
		var content = arr[i];
		var wrapper = document.createElement(content.tagName);
		wrapper.style.display = 'inline-block';
		
		var base = content.parentElement;
		base.replaceChild(wrapper, content);
		wrapper.appendChild(content);
		
		var iframe = content.getElementsByTagName('iframe')[0];
		var mask = document.createElement('span');
		var href = iframe.dataset.href;
		
		// If needed, creates a link on the mask
		var child;
		if (href === undefined)
			child = mask;
		else
		{
			child = document.createElement('a');
			child.href=href;
			child.target='_blank';
			child.appendChild(mask);
		}	
		content.insertBefore(child, content.childNodes[1]);	
			
		// Enable superposition	
		var cStyle = content.style;
		var mStyle = mask.style;
		cStyle.position = 'relative';
		mStyle.position = 'absolute';	
		
		mStyle.borderTopColor = iframe.dataset.color;
		mask.classList.add(iframe.dataset.mask);	
		
		// TODO: Based on iframe's width?
		var width = 91;
		mStyle.left += (iframe.width-width)+'px';	
		mStyle.borderTopWidth = mask.style.borderLeftWidth = width+'px';
		_loadedContent(content);
		
		// Frees memory
		iframe.removeAttribute('data-mask');
		iframe.removeAttribute('data-href');
		iframe.removeAttribute('data-color');
	}
}
</script>
<style>
.countdown {
	/* Still takes the iframe's space */
	visibility:hidden;
	float:right;
}
.triangle {
	width:0;
	height:0;
	border-top-style:solid;
	border-left-style:solid;
	border-left-color:transparent;
}
</style>
<noscript><style>
.countdown {
	visibility:show;
}
</style></noscript>
</head>
<body onload="_onload('countdown');">
<span class="countdown">
	<iframe onload="_loadedIframe(this)" style="border:0" height=480 width=360 src="https://w2.countingdownto.com/2189066" data-color="#3599FB" data-mask="triangle" data-href="https://minecraft.net/en-us/minecon/"></iframe>
</span>
<br/>           
<div class="paragraph">
	<span class="countdown">
		<iframe onload="_loadedIframe(this)" style="border:0" height=480 width=360 src="https://w2.countingdownto.com/2256175" data-color="#FF0000" data-mask="triangle" data-href="https://www.daymarrally.com"></iframe>
	</span>
	<span class="countdown">
		<iframe onload="_loadedIframe(this)" style="border:0" height=480 width=360 src="https://w2.countingdownto.com/2256178" data-color="#FF0000" data-mask="triangle" data-href="https://www.daymarrally.com"></iframe>
	</span>
	<span class="countdown">
		<iframe onload="_loadedIframe(this)" style="border:0" height=480 width=360 src="https://w2.countingdownto.com/2187210" data-color="#F9FDF7" data-mask="triangle" data-href="https://www.daymarrally.com"></iframe>
	</span>
</div>

</body>
</html>
