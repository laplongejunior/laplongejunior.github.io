<html>
<head>
<title>Un test</title>
<script>
const url = "https://www.whatismyreferer.com/";
popup(url);
redirect(url, document);

function popup(url) {
	let exit = window.open('about:blank');
	if (!exit) return;
	exit.opener = null;
	
	redirect(url, exit.document);
	
	/*
	let el = doc.createElement('meta');
	el.httpEquiv = 'refresh';
	el.content = '0; URL='+url;
	*/
}

function redirect(url, doc) {	
	let el;
	el = doc.createElement('meta');
	el.name = 'referrer';
	el.content = 'never';
	doc.head.appendChild(el);
	
	el = doc.createElement('script');
	el.appendChild(doc.createTextNode("location.replace('"+url+"')"));
	doc.head.appendChild(el);
}
</script>
</head>
<body>
</body>
</html>
