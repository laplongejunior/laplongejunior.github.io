<!DOCTYPE html>
<html>
<head>
<title>Test</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<script>
versionNumber = 1;
function _onload() {
	console.log('running:'+versionNumber);
	var LENGTH = arguments.length/2;
	for (var i = 0; i < LENGTH; ++i)
	{
		console.log(i);
		var xhr = new XMLHttpRequest();
		xhr.open('GET', 'https://laplongejunior.github.io/laplongejunior-be-ma/test.html');
		xhr.addEventListener('readystatechange', _countdownReceived(xhr, arguments[i*2]));		
		xhr.send(null);
		console.log(i);
	}
}

function _countdownReceived(xhr, iframeID)
{
	console.log(iframeID);
	console.log(xhr.readyState);
	console.log(XMLHttpRequest.DONE);
	if (xhr.readyState !== XMLHttpRequest.DONE) return;
		
	var iframe = document.getElementById(iframeID);
	console.log(iframe);
	console.log(iframe.contentDocument);
	console.log(iframe.contentWindow.document);
	var innerDoc = (iframe.contentDocument || iframe.contentWindow.document);
	console.log(innerDoc);
	innerDoc.open();
	innerDoc.write(xhr.responseText);
	innerDoc.close();
}
</script>
</head>
<body onload="_onload('countdown1', 1979194)">
<iframe id="countdown1" height=700 width=360 frameborder=0 src=""></iframe>
</body>
</html>
