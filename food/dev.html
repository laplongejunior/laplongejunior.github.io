<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="referrer" content="no-referrer" />
<!-- Refreshes the page every 5 minutes -->
<meta http-equiv="refresh" content="600" />
<title>Test</title>
<style>
html, body {
	height:100%;
	width:100%;
	margin:0;
	padding:0;
}
iframe {
    border:none;
}

.main {
	position:absolute;
	display:-ms-grid;
	display:grid;
	grid-auto-rows: 1fr;
	
	-ms-grid-columns: 1fr;
	grid-template-columns: 1fr;
	-ms-grid-rows: 600px 600px 600px 600px 600px 600px 600px 600px 600px 600px 600px 600px;
}
@media all and (min-width: 500px) {
	.main {
		-ms-grid-columns: 1fr 1fr;
		grid-template-columns: repeat(2, 1fr);
		-ms-grid-rows: 600px 600px 600px 600px 600px 600px;
	}
}
@media all and (min-width: 1000px) {
	.main {
		-ms-grid-columns: 1fr 1fr 1fr;
		grid-template-columns: repeat(3, 1fr);
		-ms-grid-rows: 600px 600px 600px 600px;
	}
}
@media all and (min-width: 1500px) {
	.main {
		-ms-grid-columns: 1fr 1fr 1fr 1fr;
		grid-template-columns: repeat(4, 1fr);
		-ms-grid-rows: 600px 600px 600px;
	}
}
.fb {
	border:0;
	width:100%;
	height:100%;
	overflow-y:scroll;
}
</style>
</head>
<body class="main">
<!-- La chine -->
<iframe class="fb" data-id="laChine.7090" data-link data-event></iframe>
<!-- Peking city -->
<iframe class="fb" data-id="729688737058316" data-link data-event></iframe>
<!-- Yummy -->
<iframe class="fb" data-id="486514164698001" data-link data-event></iframe>
	
<!-- Della Casa -->
<!--<iframe class="fb" data-id="105696147575324" data-link></iframe>-->
<!-- Para Nova -->
<iframe class="fb" data-id="106520487912837" data-link data-event></iframe>
<!-- Il viale -->
<!--<iframe class="fb" data-id="391876530940664" data-link></iframe>-->

<!-- Foire du midi -->
<iframe class="fb" data-id="300225590442881" data-event></iframe>
<!-- Made in Asia -->
<!--<iframe class="fb" data-id="158248754848"></iframe>-->
<!-- Japan Con -->
<!--<iframe class="fb" data-id="1183102238487055"></iframe>-->
<!-- Comic Con -->
<!--<iframe class="fb" data-id="1500913783536307"></iframe>-->

<!-- McDonald's -->
<iframe class="fb" data-id="McDonaldsBelgique"></iframe>
<!-- Quick -->
<iframe class="fb" data-id="101101084709774"></iframe>
<!-- Burger King -->
<iframe class="fb" data-id="345420055853895"></iframe>
<!-- KFC -->
<iframe class="fb" data-id="KFC.BE"></iframe>
<!-- Moods -->
<iframe class="fb" data-id="1965984716761917" data-event></iframe>
<!-- Mayeur burgeur-->
<!--<iframe class="fb" data-id="112730726846337" data-link></iframe>-->

<script>
"use strict";
addEventListener('load', ()=>{
	// FB parameter
	// Minification is going to optimize away the concatenation statement 
	const LAZY_LOADING = "false";
	
	let getAttribute = (element,name) => element.getAttribute('data-'+name);
	let conditionalConcat = (element,name,value) => getAttribute(element,name)===null?"":value;
	
	// We can add a few limitations to the iframes, sadly facebook is kinda intrusive
	// allow-popups is not required to show the feed, but is required to be able to click on the source links
	const elements = document.getElementsByClassName('fb');
	for (let fbElement of elements)
		fbElement.sandbox = "allow-same-origin allow-scripts" + conditionalConcat(fbElement,'link'," allow-popups allow-popups-to-escape-sandbox");

	let refreshFb = ()=>{
		// CSS already takes care of making correct columns, we simply need to make the contained element matches the columns
		for (let fbElement of elements) {
			let style = getComputedStyle(fbElement);
			let width = parseInt(style['width']);
			let height = parseInt(style['height']);

			if (fbElement.prevWidth === width && fbElement.prevHeight === height)
				return;
			fbElement.prevWidth = width;
			fbElement.prevHeight = height;

			// Facebook's documentation : https://developers.facebook.com/docs/plugins/page-plugin/
			const TARGET = "https://www.facebook.com/"
			fbElement.src = TARGET+"plugins/page.php?href="+TARGET
				+getAttribute(fbElement,'id')
				+"&width="+width + "&height="+height
				+"&tabs=timeline"+conditionalConcat(fbElement,'event',",events")
				+"&hide_cover=true&show_facepile=false&hide_cta=false&small_header=true&adapt_container_width=false"
				+"&lazy="+LAZY_LOADING;
		}
	};
	
	refreshFb();	
	// Recalculate the elements size when the window is redimensionned
	// Because reloading facebook is a rather heavy load, we wait until the user stopped changing the size
	var m_fbTimer;
	addEventListener('resize', ()=>{
			if (m_fbTimer) clearTimeout(m_fbTimer);
			m_fbTimer = setTimeout(refreshFb, 5000);
		});
});
</script>
</html>
