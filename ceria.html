<!DOCTYPE html>
<html lang="fr" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8" />
<title>Liste des absences du Ceria</title>
<link rel="icon" href="http://www.ceria.be/irl/templates/ja_purity/favicon.ico" type="image/x-icon" />
<style>.yesjs { visibility:visible; }</style>
<noscript>
	<meta http-equiv="refresh" content="600">
	<style>.yesjs { visibility:hidden; }</style>
</noscript>
<style>
iframe { border:none; }
html, body {
	height:100%;
	width:100%;
	margin:0;
	padding:0;
}
.main {
	display:-ms-grid;
	-ms-grid-columns: 500px 1fr;
	-ms-grid-rows: 500px 1fr;
	display:grid;
	grid-template-columns: 500px 1fr;
	grid-template-rows: 500px 1fr;
}

.cell {
	width:100%;
	height:100%;
}
.cell-a {
	-ms-grid-row:1;
	-ms-grid-column:1;
	grid-row:1;
	grid-column:1;
}
.cell-b {
	-ms-grid-row:1;
	-ms-grid-row-span:2;
	-ms-grid-column:2;
	grid-row:1/span 2;
	grid-column:2;
}
.cell-c {
	-ms-grid-row:2;
	-ms-grid-column:1;
	grid-row:2;
	grid-column:1;
}

.local {
}
</style>
<script>
var m_originalWidth, m_console;
function load(fbId, profsId, consoleId) {
	var doc = window.document;
	var originalStyle = window.getComputedStyle(doc.getElementById(fbId));
	m_originalWidth = parseInt(originalStyle['width']);
	
	m_console = doc.getElementById(consoleId);
	var profsElement = doc.getElementById(profsId);
	window.setInterval(function(){refresh(profsElement)}, 600000);
	
	var func = function(){redraw(profsElement.parentElement)};
	func.call();	
	window.addEventListener("resize", func);
	
	log('Page ouverte');
	window.open('https://www.google.be', '_blank');
}
function redraw(grid) {
	var temp = window.document.body.offsetWidth/2;
	if (temp > m_originalWidth)
		temp = m_originalWidth;	
	grid.style['-ms-grid-columns'] = temp+'px 1fr';
	grid.style['gridTemplateColumns'] = temp+'px 1fr';
}
function refresh(iframe) {
	var src = iframe.src;
	iframe.src = 'about:blank';
	iframe.src = src;
	log('Fenêtre Ceria rechargée');
}
function log(line) {	
	var temp = m_console.innerHTML;
	if (temp.length > 0) temp = '<br/>' + temp;
	var now = new Date();
	temp = '['+pad(now.getHours())+':'+pad(now.getMinutes())+':'+pad(now.getSeconds())+'] ' + line + temp;
	m_console.innerHTML = temp;
}
function pad(str) {
	return ('00' + str).slice(-2);
}

window.addEventListener('load', function(){load('fb','profs','console')}, false);
</script>
</head>
<body class="main">
<iframe id="fb" class="cell cell-a" src="https://www.facebook.com/plugins/page.php?href=https://www.facebook.com/456811884398747&tabs=timeline&width=500&small_header=true&adapt_container_width=true&hide_cover=true&show_facepile=false" sandbox="allow-same-origin allow-scripts"></iframe>
<iframe id="profs" class="cell cell-b" src="http://www.ceria.be/irl/index.php?option=com_content&view=article&id=114&Itemid=129" sandbox=""></iframe>
<div class="cell cell-c">
	<span id="console" class="yesjs local">Première ligne de la console</span>
	<noscript>
	Javascript est désactivé<br />
	Cette page s'auto-rafraîchira intégralement<br />
	Toutes les 10 minutes
	</noscript>
</div>   
</body>
</html>